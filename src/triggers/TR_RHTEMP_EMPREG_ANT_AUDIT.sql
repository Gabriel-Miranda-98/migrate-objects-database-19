
  CREATE OR REPLACE EDITIONABLE TRIGGER "ARTERH"."TR_RHTEMP_EMPREG_ANT_AUDIT" 
AFTER UPDATE OR DELETE OR INSERT ON "ARTERH"."RHTEMP_EMPREG_ANT" 
FOR EACH ROW
 DECLARE
v_DML RHPBH_RHTEMP_EMPREG_ANT_AUDIT.TIPO_DML%TYPE;
BEGIN
IF INSERTING THEN
v_DML := 'I';
INSERT INTO RHPBH_RHTEMP_EMPREG_ANT_AUDIT
(
TIPO_DML,
CODIGO_EMPRESA,
TIPO_CONTRATO,
CODIGO_CONTRATO,
OCORRENCIA,
EMPRESA_ANTERIOR,
ENDERECO_EMPRESA,
DATA_ADMISSAO,
DATA_DEMISSAO,
MOTIVO_DEMISSAO,
ULTIMO_CARGO,
DIAS,
MESES,
ANOS,
DIAS_LIQUIDO,
NATUREZA_EMPRESA,
FINALIDADE,
C_LIVRE_SELEC1,
C_LIVRE_SELEC2,
C_LIVRE_SELEC3,
C_LIVRE_SELEC4,
C_LIVRE_SELEC5,
C_LIVRE_SELEC6,
C_LIVRE_VALOR7,
C_LIVRE_VALOR8,
C_LIVRE_DATA9,
C_LIVRE_DATA10,
C_LIVRE_DATA11,
C_LIVRE_OPCAO12,
C_LIVRE_OPCAO13,
C_LIVRE_OPCAO14,
C_LIVRE_DESCR15,
C_LIVRE_DESCR16,
C_LIVRE_DESCR17,
DATA_EMISSAO,
TEXTO_ASSOCIADO,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
TP_COMPROV,
PROCESSO,
INDIC_DESAVERBACAO,
DATA_DESAVERBACAO,
MOTIV_DESAVERBACAO,
CALCULA_TEMPO_LIQ,
CODIGO_PESSOA,
OCORRENCIA_ANT,
DATA_AVERBACAO,
DATA_FIM_DESAVERB,
DIAS_FALTA_ACUMUL,
CODIGO_PREVIDENCIA,
CODIGO_EMPRESA_ANT,
CODIGO_CARGO,
CODIGO_FUNCAO,
CODIGO_ESPEC,
NUMERO,
COMPLEMENTO,
BAIRRO,
MUNICIPIO,
UF,
CODIGO_ENDERECO,
AREA_ATUACAO,
ASSINATURA_01,
ASSINATURA_02,
DIAS_INSS,
MESES_INSS,
ANOS_INSS,
DIAS_LIQUIDO_INSS,
FALTAS_NAO_DEDUZ,
CONSIDERA_CALEND,
VINCULO,
ULTIMA_REMUNERACAO,
CODIGO_CLASSIFICA,
MATRICULA_ANTERIOR,
CNPJ_EMPRESA_ANTERIOR,
SIT_EMPR_ANTERIOR,
TELEFONE,
CARGA_HORARIA_SEMANAL
)
VALUES
(
v_DML,
:NEW.CODIGO_EMPRESA,
:NEW.TIPO_CONTRATO,
:NEW.CODIGO_CONTRATO,
:NEW.OCORRENCIA,
:NEW.EMPRESA_ANTERIOR,
:NEW.ENDERECO_EMPRESA,
:NEW.DATA_ADMISSAO,
:NEW.DATA_DEMISSAO,
:NEW.MOTIVO_DEMISSAO,
:NEW.ULTIMO_CARGO,
:NEW.DIAS,
:NEW.MESES,
:NEW.ANOS,
:NEW.DIAS_LIQUIDO,
:NEW.NATUREZA_EMPRESA,
:NEW.FINALIDADE,
:NEW.C_LIVRE_SELEC1,
:NEW.C_LIVRE_SELEC2,
:NEW.C_LIVRE_SELEC3,
:NEW.C_LIVRE_SELEC4,
:NEW.C_LIVRE_SELEC5,
:NEW.C_LIVRE_SELEC6,
:NEW.C_LIVRE_VALOR7,
:NEW.C_LIVRE_VALOR8,
:NEW.C_LIVRE_DATA9,
:NEW.C_LIVRE_DATA10,
:NEW.C_LIVRE_DATA11,
:NEW.C_LIVRE_OPCAO12,
:NEW.C_LIVRE_OPCAO13,
:NEW.C_LIVRE_OPCAO14,
:NEW.C_LIVRE_DESCR15,
:NEW.C_LIVRE_DESCR16,
:NEW.C_LIVRE_DESCR17,
:NEW.DATA_EMISSAO,
:NEW.TEXTO_ASSOCIADO,
USER,
SYSDATE,
:NEW.TP_COMPROV,
:NEW.PROCESSO,
:NEW.INDIC_DESAVERBACAO,
:NEW.DATA_DESAVERBACAO,
:NEW.MOTIV_DESAVERBACAO,
:NEW.CALCULA_TEMPO_LIQ,
:NEW.CODIGO_PESSOA,
:NEW.OCORRENCIA_ANT,
:NEW.DATA_AVERBACAO,
:NEW.DATA_FIM_DESAVERB,
:NEW.DIAS_FALTA_ACUMUL,
:NEW.CODIGO_PREVIDENCIA,
:NEW.CODIGO_EMPRESA_ANT,
:NEW.CODIGO_CARGO,
:NEW.CODIGO_FUNCAO,
:NEW.CODIGO_ESPEC,
:NEW.NUMERO,
:NEW.COMPLEMENTO,
:NEW.BAIRRO,
:NEW.MUNICIPIO,
:NEW.UF,
:NEW.CODIGO_ENDERECO,
:NEW.AREA_ATUACAO,
:NEW.ASSINATURA_01,
:NEW.ASSINATURA_02,
:NEW.DIAS_INSS,
:NEW.MESES_INSS,
:NEW.ANOS_INSS,
:NEW.DIAS_LIQUIDO_INSS,
:NEW.FALTAS_NAO_DEDUZ,
:NEW.CONSIDERA_CALEND,
:NEW.VINCULO,
:NEW.ULTIMA_REMUNERACAO,
:NEW.CODIGO_CLASSIFICA,
:NEW.MATRICULA_ANTERIOR,
:NEW.CNPJ_EMPRESA_ANTERIOR,
:NEW.SIT_EMPR_ANTERIOR,
:NEW.TELEFONE,
:NEW.CARGA_HORARIA_SEMANAL
);
GRAVA_MODULO_APOSENT(:NEW.CODIGO_CONTRATO,'RHTEMP_EMPREG_ANT',:NEW.TIPO_CONTRATO, :NEW.CODIGO_EMPRESA,NULL,NULL, NULL,NULL, NULL,NULL, :NEW.OCORRENCIA, NULL, NULL, NULL,NULL,NULL );

END IF;

IF DELETING THEN
v_DML := 'D';
INSERT INTO RHPBH_RHTEMP_EMPREG_ANT_AUDIT
(
TIPO_DML,
CODIGO_EMPRESA,
TIPO_CONTRATO,
CODIGO_CONTRATO,
OCORRENCIA,
EMPRESA_ANTERIOR,
ENDERECO_EMPRESA,
DATA_ADMISSAO,
DATA_DEMISSAO,
MOTIVO_DEMISSAO,
ULTIMO_CARGO,
DIAS,
MESES,
ANOS,
DIAS_LIQUIDO,
NATUREZA_EMPRESA,
FINALIDADE,
C_LIVRE_SELEC1,
C_LIVRE_SELEC2,
C_LIVRE_SELEC3,
C_LIVRE_SELEC4,
C_LIVRE_SELEC5,
C_LIVRE_SELEC6,
C_LIVRE_VALOR7,
C_LIVRE_VALOR8,
C_LIVRE_DATA9,
C_LIVRE_DATA10,
C_LIVRE_DATA11,
C_LIVRE_OPCAO12,
C_LIVRE_OPCAO13,
C_LIVRE_OPCAO14,
C_LIVRE_DESCR15,
C_LIVRE_DESCR16,
C_LIVRE_DESCR17,
DATA_EMISSAO,
TEXTO_ASSOCIADO,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
TP_COMPROV,
PROCESSO,
INDIC_DESAVERBACAO,
DATA_DESAVERBACAO,
MOTIV_DESAVERBACAO,
CALCULA_TEMPO_LIQ,
CODIGO_PESSOA,
OCORRENCIA_ANT,
DATA_AVERBACAO,
DATA_FIM_DESAVERB,
DIAS_FALTA_ACUMUL,
CODIGO_PREVIDENCIA,
CODIGO_EMPRESA_ANT,
CODIGO_CARGO,
CODIGO_FUNCAO,
CODIGO_ESPEC,
NUMERO,
COMPLEMENTO,
BAIRRO,
MUNICIPIO,
UF,
CODIGO_ENDERECO,
AREA_ATUACAO,
ASSINATURA_01,
ASSINATURA_02,
DIAS_INSS,
MESES_INSS,
ANOS_INSS,
DIAS_LIQUIDO_INSS,
FALTAS_NAO_DEDUZ,
CONSIDERA_CALEND,
VINCULO,
ULTIMA_REMUNERACAO,
CODIGO_CLASSIFICA,
MATRICULA_ANTERIOR,
CNPJ_EMPRESA_ANTERIOR,
SIT_EMPR_ANTERIOR,
TELEFONE,
CARGA_HORARIA_SEMANAL
)
VALUES
(
v_DML,
:OLD.CODIGO_EMPRESA,
:OLD.TIPO_CONTRATO,
:OLD.CODIGO_CONTRATO,
:OLD.OCORRENCIA,
:OLD.EMPRESA_ANTERIOR,
:OLD.ENDERECO_EMPRESA,
:OLD.DATA_ADMISSAO,
:OLD.DATA_DEMISSAO,
:OLD.MOTIVO_DEMISSAO,
:OLD.ULTIMO_CARGO,
:OLD.DIAS,
:OLD.MESES,
:OLD.ANOS,
:OLD.DIAS_LIQUIDO,
:OLD.NATUREZA_EMPRESA,
:OLD.FINALIDADE,
:OLD.C_LIVRE_SELEC1,
:OLD.C_LIVRE_SELEC2,
:OLD.C_LIVRE_SELEC3,
:OLD.C_LIVRE_SELEC4,
:OLD.C_LIVRE_SELEC5,
:OLD.C_LIVRE_SELEC6,
:OLD.C_LIVRE_VALOR7,
:OLD.C_LIVRE_VALOR8,
:OLD.C_LIVRE_DATA9,
:OLD.C_LIVRE_DATA10,
:OLD.C_LIVRE_DATA11,
:OLD.C_LIVRE_OPCAO12,
:OLD.C_LIVRE_OPCAO13,
:OLD.C_LIVRE_OPCAO14,
:OLD.C_LIVRE_DESCR15,
:OLD.C_LIVRE_DESCR16,
:OLD.C_LIVRE_DESCR17,
:OLD.DATA_EMISSAO,
:OLD.TEXTO_ASSOCIADO,
USER,
SYSDATE,
:OLD.TP_COMPROV,
:OLD.PROCESSO,
:OLD.INDIC_DESAVERBACAO,
:OLD.DATA_DESAVERBACAO,
:OLD.MOTIV_DESAVERBACAO,
:OLD.CALCULA_TEMPO_LIQ,
:OLD.CODIGO_PESSOA,
:OLD.OCORRENCIA_ANT,
:OLD.DATA_AVERBACAO,
:OLD.DATA_FIM_DESAVERB,
:OLD.DIAS_FALTA_ACUMUL,
:OLD.CODIGO_PREVIDENCIA,
:OLD.CODIGO_EMPRESA_ANT,
:OLD.CODIGO_CARGO,
:OLD.CODIGO_FUNCAO,
:OLD.CODIGO_ESPEC,
:OLD.NUMERO,
:OLD.COMPLEMENTO,
:OLD.BAIRRO,
:OLD.MUNICIPIO,
:OLD.UF,
:OLD.CODIGO_ENDERECO,
:OLD.AREA_ATUACAO,
:OLD.ASSINATURA_01,
:OLD.ASSINATURA_02,
:OLD.DIAS_INSS,
:OLD.MESES_INSS,
:OLD.ANOS_INSS,
:OLD.DIAS_LIQUIDO_INSS,
:OLD.FALTAS_NAO_DEDUZ,
:OLD.CONSIDERA_CALEND,
:OLD.VINCULO,
:OLD.ULTIMA_REMUNERACAO,
:OLD.CODIGO_CLASSIFICA,
:OLD.MATRICULA_ANTERIOR,
:OLD.CNPJ_EMPRESA_ANTERIOR,
:OLD.SIT_EMPR_ANTERIOR,
:OLD.TELEFONE,
:OLD.CARGA_HORARIA_SEMANAL
);
GRAVA_MODULO_APOSENT(:OLD.CODIGO_CONTRATO,'RHTEMP_EMPREG_ANT',:OLD.TIPO_CONTRATO, :OLD.CODIGO_EMPRESA,NULL,NULL, NULL,NULL, NULL,NULL, :OLD.OCORRENCIA, NULL, NULL, NULL,NULL,NULL );
END IF;

IF UPDATING THEN
v_DML := 'U';
INSERT INTO RHPBH_RHTEMP_EMPREG_ANT_AUDIT
(
TIPO_DML,
CODIGO_EMPRESA,
TIPO_CONTRATO,
CODIGO_CONTRATO,
OCORRENCIA,
EMPRESA_ANTERIOR,
ENDERECO_EMPRESA,
DATA_ADMISSAO,
DATA_DEMISSAO,
MOTIVO_DEMISSAO,
ULTIMO_CARGO,
DIAS,
MESES,
ANOS,
DIAS_LIQUIDO,
NATUREZA_EMPRESA,
FINALIDADE,
C_LIVRE_SELEC1,
C_LIVRE_SELEC2,
C_LIVRE_SELEC3,
C_LIVRE_SELEC4,
C_LIVRE_SELEC5,
C_LIVRE_SELEC6,
C_LIVRE_VALOR7,
C_LIVRE_VALOR8,
C_LIVRE_DATA9,
C_LIVRE_DATA10,
C_LIVRE_DATA11,
C_LIVRE_OPCAO12,
C_LIVRE_OPCAO13,
C_LIVRE_OPCAO14,
C_LIVRE_DESCR15,
C_LIVRE_DESCR16,
C_LIVRE_DESCR17,
DATA_EMISSAO,
TEXTO_ASSOCIADO,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
TP_COMPROV,
PROCESSO,
INDIC_DESAVERBACAO,
DATA_DESAVERBACAO,
MOTIV_DESAVERBACAO,
CALCULA_TEMPO_LIQ,
CODIGO_PESSOA,
OCORRENCIA_ANT,
DATA_AVERBACAO,
DATA_FIM_DESAVERB,
DIAS_FALTA_ACUMUL,
CODIGO_PREVIDENCIA,
CODIGO_EMPRESA_ANT,
CODIGO_CARGO,
CODIGO_FUNCAO,
CODIGO_ESPEC,
NUMERO,
COMPLEMENTO,
BAIRRO,
MUNICIPIO,
UF,
CODIGO_ENDERECO,
AREA_ATUACAO,
ASSINATURA_01,
ASSINATURA_02,
DIAS_INSS,
MESES_INSS,
ANOS_INSS,
DIAS_LIQUIDO_INSS,
FALTAS_NAO_DEDUZ,
CONSIDERA_CALEND,
VINCULO,
ULTIMA_REMUNERACAO,
CODIGO_CLASSIFICA,
MATRICULA_ANTERIOR,
CNPJ_EMPRESA_ANTERIOR,
SIT_EMPR_ANTERIOR,
TELEFONE,
CARGA_HORARIA_SEMANAL
)
VALUES
(
v_DML,
:OLD.CODIGO_EMPRESA,
:OLD.TIPO_CONTRATO,
:OLD.CODIGO_CONTRATO,
:OLD.OCORRENCIA,
:OLD.EMPRESA_ANTERIOR,
:OLD.ENDERECO_EMPRESA,
:OLD.DATA_ADMISSAO,
:OLD.DATA_DEMISSAO,
:OLD.MOTIVO_DEMISSAO,
:OLD.ULTIMO_CARGO,
:OLD.DIAS,
:OLD.MESES,
:OLD.ANOS,
:OLD.DIAS_LIQUIDO,
:OLD.NATUREZA_EMPRESA,
:OLD.FINALIDADE,
:OLD.C_LIVRE_SELEC1,
:OLD.C_LIVRE_SELEC2,
:OLD.C_LIVRE_SELEC3,
:OLD.C_LIVRE_SELEC4,
:OLD.C_LIVRE_SELEC5,
:OLD.C_LIVRE_SELEC6,
:OLD.C_LIVRE_VALOR7,
:OLD.C_LIVRE_VALOR8,
:OLD.C_LIVRE_DATA9,
:OLD.C_LIVRE_DATA10,
:OLD.C_LIVRE_DATA11,
:OLD.C_LIVRE_OPCAO12,
:OLD.C_LIVRE_OPCAO13,
:OLD.C_LIVRE_OPCAO14,
:OLD.C_LIVRE_DESCR15,
:OLD.C_LIVRE_DESCR16,
:OLD.C_LIVRE_DESCR17,
:OLD.DATA_EMISSAO,
:OLD.TEXTO_ASSOCIADO,
:NEW.LOGIN_USUARIO,
:NEW.DT_ULT_ALTER_USUA,
:OLD.TP_COMPROV,
:OLD.PROCESSO,
:OLD.INDIC_DESAVERBACAO,
:OLD.DATA_DESAVERBACAO,
:OLD.MOTIV_DESAVERBACAO,
:OLD.CALCULA_TEMPO_LIQ,
:OLD.CODIGO_PESSOA,
:OLD.OCORRENCIA_ANT,
:OLD.DATA_AVERBACAO,
:OLD.DATA_FIM_DESAVERB,
:OLD.DIAS_FALTA_ACUMUL,
:OLD.CODIGO_PREVIDENCIA,
:OLD.CODIGO_EMPRESA_ANT,
:OLD.CODIGO_CARGO,
:OLD.CODIGO_FUNCAO,
:OLD.CODIGO_ESPEC,
:OLD.NUMERO,
:OLD.COMPLEMENTO,
:OLD.BAIRRO,
:OLD.MUNICIPIO,
:OLD.UF,
:OLD.CODIGO_ENDERECO,
:OLD.AREA_ATUACAO,
:OLD.ASSINATURA_01,
:OLD.ASSINATURA_02,
:OLD.DIAS_INSS,
:OLD.MESES_INSS,
:OLD.ANOS_INSS,
:OLD.DIAS_LIQUIDO_INSS,
:OLD.FALTAS_NAO_DEDUZ,
:OLD.CONSIDERA_CALEND,
:OLD.VINCULO,
:OLD.ULTIMA_REMUNERACAO,
:OLD.CODIGO_CLASSIFICA,
:OLD.MATRICULA_ANTERIOR,
:OLD.CNPJ_EMPRESA_ANTERIOR,
:OLD.SIT_EMPR_ANTERIOR,
:OLD.TELEFONE,
:OLD.CARGA_HORARIA_SEMANAL
);
GRAVA_MODULO_APOSENT(:OLD.CODIGO_CONTRATO,'RHTEMP_EMPREG_ANT',:OLD.TIPO_CONTRATO, :OLD.CODIGO_EMPRESA,NULL,NULL, NULL,NULL, NULL,NULL, :OLD.OCORRENCIA, NULL, NULL, NULL,NULL,NULL );
END IF;

END;




ALTER TRIGGER "ARTERH"."TR_RHTEMP_EMPREG_ANT_AUDIT" ENABLE