
  CREATE OR REPLACE EDITIONABLE TRIGGER "ARTERH"."TR_RHMEDI_FICHA_MED_AUDIT" 
AFTER UPDATE OR DELETE OR INSERT ON "ARTERH"."RHMEDI_FICHA_MED" 
FOR EACH ROW
 DECLARE
v_DML RHPBH_RHMEDI_FICHA_MED_AUDIT.TIPO_DML%TYPE;
BEGIN
IF INSERTING THEN
v_DML := 'I';
INSERT INTO RHPBH_RHMEDI_FICHA_MED_AUDIT
(
TIPO_DML,
CODIGO_EMPRESA,
CODIGO_PESSOA,
DT_REG_OCORRENCIA,
OCORRENCIA,
NATUREZA_EXAME,
EMPRESA_ATENDENTE,
CODIGO_ATENDENTE,
HORARIO_ATEND,
CTRL_OCORRENCIA,
PRIMEIRO_CONTATO,
PARECER_MEDICO,
PARECER_INSS,
NEXO_CAUSAL,
PROV_EMISSAO_CAT,
BENEFICIO,
NRO_BENEFICIO,
CONCLUSAO,
DATA_INI_AFAST,
DATA_FIM_AFAST,
SITUACAO_FUNCIONAL,
TEXTO01,
TEXTO02,
TEXTO03,
TEXTO04,
TEXTO05,
C_LIVRE_SELEC01,
C_LIVRE_SELEC02,
C_LIVRE_VALOR01,
C_LIVRE_VALOR02,
C_LIVRE_DATA01,
C_LIVRE_DATA02,
C_LIVRE_OPCAO01,
C_LIVRE_OPCAO02,
C_LIVRE_DESCR01,
C_LIVRE_DESCR02,
TEXTO_ASSOCIADO,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
PESO,
ALTURA,
DT_PREV_RETORNO,
PRESSAO,
TEMPERATURA,
CODIGO_QUEIXA,
TIPO_CONTRATO,
CODIGO_CONTRATO,
PULSO,
HORA_INI_AFAST,
HORA_FIM_AFAST,
CODIGO_PROC_MED,
DATA_EFETIV_ATEND,
HORA_EFETIV_ATEND,
CODIGO_MOT_AUSE,
PROXIMA_SITUACAO,
INDICE_MASSA_CORP,
OCOR_SOLIC_ATEND,
OCOR_INCIDENTE,
CODIGO_FGTS,
INDIC_REFERENCIA,
INDIC_OCUPACIONAL,
NOME_ATENDENTE,
LOCAL_ATENDIMENTO,
DATA_CONCLUSAO,
CODIGO_DIAG_ENF,
ID_AGRUP,
INSCRICAO_CONSELHO,
ID_JUNTA_MED,
VALOR_BENEF_MENSAL,
VALOR_BENEF_13SAL,
VALOR_BENEF_LIQ,
CTRL_APTIDAO,
COD_CNES,
IND_INTERNACAO,
DESC_LESAO,
DIAG_PROVAVEL,
DT_PROC_ESOCIAL,
DT_ALTER_ESOCIAL,
UF_INSCRICAO,
QTDE_DIAS_AFAST,
INFO_MESMO_MOTIVO,
VALIDADE,
DATA_ASO,
CODIGO_CANDIDATO,
CODIGO_EVENTO_SEL,
TP_ACID_TRANSITO_ESOCIAL,
OBSERVACAO_ESOCIAL,
CONSELHO_REGIONAL,
IND_EF_RETRO_ESOCIAL,
ORIG_ALT_ESOCIAL,
COD_PROCESSO,
DESCR_DETALHADA,
CTRL_PROGRAMACAO,
MOTIVO_PROGRAMACAO
)
VALUES
(
v_DML,
:NEW.CODIGO_EMPRESA,
:NEW.CODIGO_PESSOA,
:NEW.DT_REG_OCORRENCIA,
:NEW.OCORRENCIA,
:NEW.NATUREZA_EXAME,
:NEW.EMPRESA_ATENDENTE,
:NEW.CODIGO_ATENDENTE,
:NEW.HORARIO_ATEND,
:NEW.CTRL_OCORRENCIA,
:NEW.PRIMEIRO_CONTATO,
:NEW.PARECER_MEDICO,
:NEW.PARECER_INSS,
:NEW.NEXO_CAUSAL,
:NEW.PROV_EMISSAO_CAT,
:NEW.BENEFICIO,
:NEW.NRO_BENEFICIO,
:NEW.CONCLUSAO,
:NEW.DATA_INI_AFAST,
:NEW.DATA_FIM_AFAST,
:NEW.SITUACAO_FUNCIONAL,
:NEW.TEXTO01,
:NEW.TEXTO02,
:NEW.TEXTO03,
:NEW.TEXTO04,
:NEW.TEXTO05,
:NEW.C_LIVRE_SELEC01,
:NEW.C_LIVRE_SELEC02,
:NEW.C_LIVRE_VALOR01,
:NEW.C_LIVRE_VALOR02,
:NEW.C_LIVRE_DATA01,
:NEW.C_LIVRE_DATA02,
:NEW.C_LIVRE_OPCAO01,
:NEW.C_LIVRE_OPCAO02,
:NEW.C_LIVRE_DESCR01,
:NEW.C_LIVRE_DESCR02,
:NEW.TEXTO_ASSOCIADO,
USER,
SYSDATE,
:NEW.PESO,
:NEW.ALTURA,
:NEW.DT_PREV_RETORNO,
:NEW.PRESSAO,
:NEW.TEMPERATURA,
:NEW.CODIGO_QUEIXA,
:NEW.TIPO_CONTRATO,
:NEW.CODIGO_CONTRATO,
:NEW.PULSO,
:NEW.HORA_INI_AFAST,
:NEW.HORA_FIM_AFAST,
:NEW.CODIGO_PROC_MED,
:NEW.DATA_EFETIV_ATEND,
:NEW.HORA_EFETIV_ATEND,
:NEW.CODIGO_MOT_AUSE,
:NEW.PROXIMA_SITUACAO,
:NEW.INDICE_MASSA_CORP,
:NEW.OCOR_SOLIC_ATEND,
:NEW.OCOR_INCIDENTE,
:NEW.CODIGO_FGTS,
:NEW.INDIC_REFERENCIA,
:NEW.INDIC_OCUPACIONAL,
:NEW.NOME_ATENDENTE,
:NEW.LOCAL_ATENDIMENTO,
:NEW.DATA_CONCLUSAO,
:NEW.CODIGO_DIAG_ENF,
:NEW.ID_AGRUP,
:NEW.INSCRICAO_CONSELHO,
:NEW.ID_JUNTA_MED,
:NEW.VALOR_BENEF_MENSAL,
:NEW.VALOR_BENEF_13SAL,
:NEW.VALOR_BENEF_LIQ,
:NEW.CTRL_APTIDAO,
:NEW.COD_CNES,
:NEW.IND_INTERNACAO,
:NEW.DESC_LESAO,
:NEW.DIAG_PROVAVEL,
:NEW.DT_PROC_ESOCIAL,
:NEW.DT_ALTER_ESOCIAL,
:NEW.UF_INSCRICAO,
:NEW.QTDE_DIAS_AFAST,
:NEW.INFO_MESMO_MOTIVO,
:NEW.VALIDADE,
:NEW.DATA_ASO,
:NEW.CODIGO_CANDIDATO,
:NEW.CODIGO_EVENTO_SEL,
:NEW.TP_ACID_TRANSITO_ESOCIAL,
:NEW.OBSERVACAO_ESOCIAL,
:NEW.CONSELHO_REGIONAL,
:NEW.IND_EF_RETRO_ESOCIAL,
:NEW.ORIG_ALT_ESOCIAL,
:NEW.COD_PROCESSO,
:NEW.DESCR_DETALHADA,
:NEW.CTRL_PROGRAMACAO,
:NEW.MOTIVO_PROGRAMACAO
);
END IF;

IF DELETING THEN
v_DML := 'D';
INSERT INTO RHPBH_RHMEDI_FICHA_MED_AUDIT
(
TIPO_DML,
CODIGO_EMPRESA,
CODIGO_PESSOA,
DT_REG_OCORRENCIA,
OCORRENCIA,
NATUREZA_EXAME,
EMPRESA_ATENDENTE,
CODIGO_ATENDENTE,
HORARIO_ATEND,
CTRL_OCORRENCIA,
PRIMEIRO_CONTATO,
PARECER_MEDICO,
PARECER_INSS,
NEXO_CAUSAL,
PROV_EMISSAO_CAT,
BENEFICIO,
NRO_BENEFICIO,
CONCLUSAO,
DATA_INI_AFAST,
DATA_FIM_AFAST,
SITUACAO_FUNCIONAL,
TEXTO01,
TEXTO02,
TEXTO03,
TEXTO04,
TEXTO05,
C_LIVRE_SELEC01,
C_LIVRE_SELEC02,
C_LIVRE_VALOR01,
C_LIVRE_VALOR02,
C_LIVRE_DATA01,
C_LIVRE_DATA02,
C_LIVRE_OPCAO01,
C_LIVRE_OPCAO02,
C_LIVRE_DESCR01,
C_LIVRE_DESCR02,
TEXTO_ASSOCIADO,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
PESO,
ALTURA,
DT_PREV_RETORNO,
PRESSAO,
TEMPERATURA,
CODIGO_QUEIXA,
TIPO_CONTRATO,
CODIGO_CONTRATO,
PULSO,
HORA_INI_AFAST,
HORA_FIM_AFAST,
CODIGO_PROC_MED,
DATA_EFETIV_ATEND,
HORA_EFETIV_ATEND,
CODIGO_MOT_AUSE,
PROXIMA_SITUACAO,
INDICE_MASSA_CORP,
OCOR_SOLIC_ATEND,
OCOR_INCIDENTE,
CODIGO_FGTS,
INDIC_REFERENCIA,
INDIC_OCUPACIONAL,
NOME_ATENDENTE,
LOCAL_ATENDIMENTO,
DATA_CONCLUSAO,
CODIGO_DIAG_ENF,
ID_AGRUP,
INSCRICAO_CONSELHO,
ID_JUNTA_MED,
VALOR_BENEF_MENSAL,
VALOR_BENEF_13SAL,
VALOR_BENEF_LIQ,
CTRL_APTIDAO,
COD_CNES,
IND_INTERNACAO,
DESC_LESAO,
DIAG_PROVAVEL,
DT_PROC_ESOCIAL,
DT_ALTER_ESOCIAL,
UF_INSCRICAO,
QTDE_DIAS_AFAST,
INFO_MESMO_MOTIVO,
VALIDADE,
DATA_ASO,
CODIGO_CANDIDATO,
CODIGO_EVENTO_SEL,
TP_ACID_TRANSITO_ESOCIAL,
OBSERVACAO_ESOCIAL,
CONSELHO_REGIONAL,
IND_EF_RETRO_ESOCIAL,
ORIG_ALT_ESOCIAL,
COD_PROCESSO,
DESCR_DETALHADA,
CTRL_PROGRAMACAO,
MOTIVO_PROGRAMACAO
)
VALUES
(
v_DML,
:OLD.CODIGO_EMPRESA,
:OLD.CODIGO_PESSOA,
:OLD.DT_REG_OCORRENCIA,
:OLD.OCORRENCIA,
:OLD.NATUREZA_EXAME,
:OLD.EMPRESA_ATENDENTE,
:OLD.CODIGO_ATENDENTE,
:OLD.HORARIO_ATEND,
:OLD.CTRL_OCORRENCIA,
:OLD.PRIMEIRO_CONTATO,
:OLD.PARECER_MEDICO,
:OLD.PARECER_INSS,
:OLD.NEXO_CAUSAL,
:OLD.PROV_EMISSAO_CAT,
:OLD.BENEFICIO,
:OLD.NRO_BENEFICIO,
:OLD.CONCLUSAO,
:OLD.DATA_INI_AFAST,
:OLD.DATA_FIM_AFAST,
:OLD.SITUACAO_FUNCIONAL,
:OLD.TEXTO01,
:OLD.TEXTO02,
:OLD.TEXTO03,
:OLD.TEXTO04,
:OLD.TEXTO05,
:OLD.C_LIVRE_SELEC01,
:OLD.C_LIVRE_SELEC02,
:OLD.C_LIVRE_VALOR01,
:OLD.C_LIVRE_VALOR02,
:OLD.C_LIVRE_DATA01,
:OLD.C_LIVRE_DATA02,
:OLD.C_LIVRE_OPCAO01,
:OLD.C_LIVRE_OPCAO02,
:OLD.C_LIVRE_DESCR01,
:OLD.C_LIVRE_DESCR02,
:OLD.TEXTO_ASSOCIADO,
USER,
SYSDATE,
:OLD.PESO,
:OLD.ALTURA,
:OLD.DT_PREV_RETORNO,
:OLD.PRESSAO,
:OLD.TEMPERATURA,
:OLD.CODIGO_QUEIXA,
:OLD.TIPO_CONTRATO,
:OLD.CODIGO_CONTRATO,
:OLD.PULSO,
:OLD.HORA_INI_AFAST,
:OLD.HORA_FIM_AFAST,
:OLD.CODIGO_PROC_MED,
:OLD.DATA_EFETIV_ATEND,
:OLD.HORA_EFETIV_ATEND,
:OLD.CODIGO_MOT_AUSE,
:OLD.PROXIMA_SITUACAO,
:OLD.INDICE_MASSA_CORP,
:OLD.OCOR_SOLIC_ATEND,
:OLD.OCOR_INCIDENTE,
:OLD.CODIGO_FGTS,
:OLD.INDIC_REFERENCIA,
:OLD.INDIC_OCUPACIONAL,
:OLD.NOME_ATENDENTE,
:OLD.LOCAL_ATENDIMENTO,
:OLD.DATA_CONCLUSAO,
:OLD.CODIGO_DIAG_ENF,
:OLD.ID_AGRUP,
:OLD.INSCRICAO_CONSELHO,
:OLD.ID_JUNTA_MED,
:OLD.VALOR_BENEF_MENSAL,
:OLD.VALOR_BENEF_13SAL,
:OLD.VALOR_BENEF_LIQ,
:OLD.CTRL_APTIDAO,
:OLD.COD_CNES,
:OLD.IND_INTERNACAO,
:OLD.DESC_LESAO,
:OLD.DIAG_PROVAVEL,
:OLD.DT_PROC_ESOCIAL,
:OLD.DT_ALTER_ESOCIAL,
:OLD.UF_INSCRICAO,
:OLD.QTDE_DIAS_AFAST,
:OLD.INFO_MESMO_MOTIVO,
:OLD.VALIDADE,
:OLD.DATA_ASO,
:OLD.CODIGO_CANDIDATO,
:OLD.CODIGO_EVENTO_SEL,
:OLD.TP_ACID_TRANSITO_ESOCIAL,
:OLD.OBSERVACAO_ESOCIAL,
:OLD.CONSELHO_REGIONAL,
:OLD.IND_EF_RETRO_ESOCIAL,
:OLD.ORIG_ALT_ESOCIAL,
:OLD.COD_PROCESSO,
:OLD.DESCR_DETALHADA,
:OLD.CTRL_PROGRAMACAO,
:OLD.MOTIVO_PROGRAMACAO
);
END IF;

IF UPDATING THEN
v_DML := 'U';
INSERT INTO RHPBH_RHMEDI_FICHA_MED_AUDIT
(
TIPO_DML,
CODIGO_EMPRESA,
CODIGO_PESSOA,
DT_REG_OCORRENCIA,
OCORRENCIA,
NATUREZA_EXAME,
EMPRESA_ATENDENTE,
CODIGO_ATENDENTE,
HORARIO_ATEND,
CTRL_OCORRENCIA,
PRIMEIRO_CONTATO,
PARECER_MEDICO,
PARECER_INSS,
NEXO_CAUSAL,
PROV_EMISSAO_CAT,
BENEFICIO,
NRO_BENEFICIO,
CONCLUSAO,
DATA_INI_AFAST,
DATA_FIM_AFAST,
SITUACAO_FUNCIONAL,
TEXTO01,
TEXTO02,
TEXTO03,
TEXTO04,
TEXTO05,
C_LIVRE_SELEC01,
C_LIVRE_SELEC02,
C_LIVRE_VALOR01,
C_LIVRE_VALOR02,
C_LIVRE_DATA01,
C_LIVRE_DATA02,
C_LIVRE_OPCAO01,
C_LIVRE_OPCAO02,
C_LIVRE_DESCR01,
C_LIVRE_DESCR02,
TEXTO_ASSOCIADO,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
PESO,
ALTURA,
DT_PREV_RETORNO,
PRESSAO,
TEMPERATURA,
CODIGO_QUEIXA,
TIPO_CONTRATO,
CODIGO_CONTRATO,
PULSO,
HORA_INI_AFAST,
HORA_FIM_AFAST,
CODIGO_PROC_MED,
DATA_EFETIV_ATEND,
HORA_EFETIV_ATEND,
CODIGO_MOT_AUSE,
PROXIMA_SITUACAO,
INDICE_MASSA_CORP,
OCOR_SOLIC_ATEND,
OCOR_INCIDENTE,
CODIGO_FGTS,
INDIC_REFERENCIA,
INDIC_OCUPACIONAL,
NOME_ATENDENTE,
LOCAL_ATENDIMENTO,
DATA_CONCLUSAO,
CODIGO_DIAG_ENF,
ID_AGRUP,
INSCRICAO_CONSELHO,
ID_JUNTA_MED,
VALOR_BENEF_MENSAL,
VALOR_BENEF_13SAL,
VALOR_BENEF_LIQ,
CTRL_APTIDAO,
COD_CNES,
IND_INTERNACAO,
DESC_LESAO,
DIAG_PROVAVEL,
DT_PROC_ESOCIAL,
DT_ALTER_ESOCIAL,
UF_INSCRICAO,
QTDE_DIAS_AFAST,
INFO_MESMO_MOTIVO,
VALIDADE,
DATA_ASO,
CODIGO_CANDIDATO,
CODIGO_EVENTO_SEL,
TP_ACID_TRANSITO_ESOCIAL,
OBSERVACAO_ESOCIAL,
CONSELHO_REGIONAL,
IND_EF_RETRO_ESOCIAL,
ORIG_ALT_ESOCIAL,
COD_PROCESSO,
DESCR_DETALHADA,
CTRL_PROGRAMACAO,
MOTIVO_PROGRAMACAO
)
VALUES
(
v_DML,
:OLD.CODIGO_EMPRESA,
:OLD.CODIGO_PESSOA,
:OLD.DT_REG_OCORRENCIA,
:OLD.OCORRENCIA,
:OLD.NATUREZA_EXAME,
:OLD.EMPRESA_ATENDENTE,
:OLD.CODIGO_ATENDENTE,
:OLD.HORARIO_ATEND,
:OLD.CTRL_OCORRENCIA,
:OLD.PRIMEIRO_CONTATO,
:OLD.PARECER_MEDICO,
:OLD.PARECER_INSS,
:OLD.NEXO_CAUSAL,
:OLD.PROV_EMISSAO_CAT,
:OLD.BENEFICIO,
:OLD.NRO_BENEFICIO,
:OLD.CONCLUSAO,
:OLD.DATA_INI_AFAST,
:OLD.DATA_FIM_AFAST,
:OLD.SITUACAO_FUNCIONAL,
:OLD.TEXTO01,
:OLD.TEXTO02,
:OLD.TEXTO03,
:OLD.TEXTO04,
:OLD.TEXTO05,
:OLD.C_LIVRE_SELEC01,
:OLD.C_LIVRE_SELEC02,
:OLD.C_LIVRE_VALOR01,
:OLD.C_LIVRE_VALOR02,
:OLD.C_LIVRE_DATA01,
:OLD.C_LIVRE_DATA02,
:OLD.C_LIVRE_OPCAO01,
:OLD.C_LIVRE_OPCAO02,
:OLD.C_LIVRE_DESCR01,
:OLD.C_LIVRE_DESCR02,
:OLD.TEXTO_ASSOCIADO,
:NEW.LOGIN_USUARIO,
:NEW.DT_ULT_ALTER_USUA,
:OLD.PESO,
:OLD.ALTURA,
:OLD.DT_PREV_RETORNO,
:OLD.PRESSAO,
:OLD.TEMPERATURA,
:OLD.CODIGO_QUEIXA,
:OLD.TIPO_CONTRATO,
:OLD.CODIGO_CONTRATO,
:OLD.PULSO,
:OLD.HORA_INI_AFAST,
:OLD.HORA_FIM_AFAST,
:OLD.CODIGO_PROC_MED,
:OLD.DATA_EFETIV_ATEND,
:OLD.HORA_EFETIV_ATEND,
:OLD.CODIGO_MOT_AUSE,
:OLD.PROXIMA_SITUACAO,
:OLD.INDICE_MASSA_CORP,
:OLD.OCOR_SOLIC_ATEND,
:OLD.OCOR_INCIDENTE,
:OLD.CODIGO_FGTS,
:OLD.INDIC_REFERENCIA,
:OLD.INDIC_OCUPACIONAL,
:OLD.NOME_ATENDENTE,
:OLD.LOCAL_ATENDIMENTO,
:OLD.DATA_CONCLUSAO,
:OLD.CODIGO_DIAG_ENF,
:OLD.ID_AGRUP,
:OLD.INSCRICAO_CONSELHO,
:OLD.ID_JUNTA_MED,
:OLD.VALOR_BENEF_MENSAL,
:OLD.VALOR_BENEF_13SAL,
:OLD.VALOR_BENEF_LIQ,
:OLD.CTRL_APTIDAO,
:OLD.COD_CNES,
:OLD.IND_INTERNACAO,
:OLD.DESC_LESAO,
:OLD.DIAG_PROVAVEL,
:OLD.DT_PROC_ESOCIAL,
:OLD.DT_ALTER_ESOCIAL,
:OLD.UF_INSCRICAO,
:OLD.QTDE_DIAS_AFAST,
:OLD.INFO_MESMO_MOTIVO,
:OLD.VALIDADE,
:OLD.DATA_ASO,
:OLD.CODIGO_CANDIDATO,
:OLD.CODIGO_EVENTO_SEL,
:OLD.TP_ACID_TRANSITO_ESOCIAL,
:OLD.OBSERVACAO_ESOCIAL,
:OLD.CONSELHO_REGIONAL,
:OLD.IND_EF_RETRO_ESOCIAL,
:OLD.ORIG_ALT_ESOCIAL,
:OLD.COD_PROCESSO,
:OLD.DESCR_DETALHADA,
:OLD.CTRL_PROGRAMACAO,
:OLD.MOTIVO_PROGRAMACAO
);

END IF;
END;




ALTER TRIGGER "ARTERH"."TR_RHMEDI_FICHA_MED_AUDIT" DISABLE