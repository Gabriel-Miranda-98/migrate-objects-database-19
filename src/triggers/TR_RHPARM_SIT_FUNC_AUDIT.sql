
  CREATE OR REPLACE EDITIONABLE TRIGGER "ARTERH"."TR_RHPARM_SIT_FUNC_AUDIT" 
AFTER UPDATE OR DELETE OR INSERT ON "ARTERH"."RHPARM_SIT_FUNC" 
FOR EACH ROW
 DECLARE
v_DML RHPBH_RHPARM_SIT_FUNC_AUDIT.TIPO_DML%TYPE;
BEGIN
IF INSERTING THEN
v_DML := 'I';
INSERT INTO RHPBH_RHPARM_SIT_FUNC_AUDIT
(
TIPO_DML,
CODIGO,
DESCRICAO,
ABREVIACAO,
CODIGO_RAIS,
CONTROLE_FOLHA,
SITUACAO_PONTO,
E_AFASTAMENTO,
ABATE_TEMPO_FERIAS,
ABATE_TEMPO_13_SAL,
RESTRICAO_DESLIG,
VERBA_1_PARA_FOLHA,
VERBA_2_PARA_FOLHA,
VERBA_3_PARA_FOLHA,
VERBA_4_PARA_FOLHA,
C_LIVRE_SELEC01,
C_LIVRE_SELEC02,
C_LIVRE_VALOR03,
C_LIVRE_VALOR04,
C_LIVRE_DATA05,
C_LIVRE_DATA06,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
MEDIDA_ESTABILID,
QTDE_ESTAB_POSTER,
SUSPENDE_REMUNERA,
QTDE_DIAS_PROXIMO,
PROXIMA_SIT_FUNC,
MOTIVO_AFAST,
GERA_SAL_BENEFICIO,
TEXTO_ASSOCIADO,
C_LIVRE_DESCR07,
C_LIVRE_DESCR08,
SUSPENDE_VALE,
GERA_REG_ACOMP,
QTDE_DETERMINADA,
CATEG_TRAB_FGTS,
CONSID_DIAS_INSS,
GRUPO_SEL_PESSOA,
COD_SEL_PESSOA,
GRUPO_SEL_CONTRATO,
COD_SEL_CONTRATO,
GERA_SIT_PTO_AUTO,
TIPO_APURACAO,
SEXO,
CODIGO_RETENCAO,
PERMITE_CONCOMIT,
ID_LEI,
DATA_INI_VIGENCIA,
DATA_FIM_VIGENCIA,
DIAS_PRORROG_ORI,
DIAS_PRORROG_DES,
DIAS_INI_PRORROG,
COD_CATEG_ESOCIAL,
C_LIVRE_OPCAO01,
C_LIVRE_OPCAO02,
C_LIVRE_OPCAO03,
COD_TP_ESTABILIDAD
)
VALUES
(
v_DML,
:NEW.CODIGO,
:NEW.DESCRICAO,
:NEW.ABREVIACAO,
:NEW.CODIGO_RAIS,
:NEW.CONTROLE_FOLHA,
:NEW.SITUACAO_PONTO,
:NEW.E_AFASTAMENTO,
:NEW.ABATE_TEMPO_FERIAS,
:NEW.ABATE_TEMPO_13_SAL,
:NEW.RESTRICAO_DESLIG,
:NEW.VERBA_1_PARA_FOLHA,
:NEW.VERBA_2_PARA_FOLHA,
:NEW.VERBA_3_PARA_FOLHA,
:NEW.VERBA_4_PARA_FOLHA,
:NEW.C_LIVRE_SELEC01,
:NEW.C_LIVRE_SELEC02,
:NEW.C_LIVRE_VALOR03,
:NEW.C_LIVRE_VALOR04,
:NEW.C_LIVRE_DATA05,
:NEW.C_LIVRE_DATA06,
USER,
SYSDATE,
:NEW.MEDIDA_ESTABILID,
:NEW.QTDE_ESTAB_POSTER,
:NEW.SUSPENDE_REMUNERA,
:NEW.QTDE_DIAS_PROXIMO,
:NEW.PROXIMA_SIT_FUNC,
:NEW.MOTIVO_AFAST,
:NEW.GERA_SAL_BENEFICIO,
:NEW.TEXTO_ASSOCIADO,
:NEW.C_LIVRE_DESCR07,
:NEW.C_LIVRE_DESCR08,
:NEW.SUSPENDE_VALE,
:NEW.GERA_REG_ACOMP,
:NEW.QTDE_DETERMINADA,
:NEW.CATEG_TRAB_FGTS,
:NEW.CONSID_DIAS_INSS,
:NEW.GRUPO_SEL_PESSOA,
:NEW.COD_SEL_PESSOA,
:NEW.GRUPO_SEL_CONTRATO,
:NEW.COD_SEL_CONTRATO,
:NEW.GERA_SIT_PTO_AUTO,
:NEW.TIPO_APURACAO,
:NEW.SEXO,
:NEW.CODIGO_RETENCAO,
:NEW.PERMITE_CONCOMIT,
:NEW.ID_LEI,
:NEW.DATA_INI_VIGENCIA,
:NEW.DATA_FIM_VIGENCIA,
:NEW.DIAS_PRORROG_ORI,
:NEW.DIAS_PRORROG_DES,
:NEW.DIAS_INI_PRORROG,
:NEW.COD_CATEG_ESOCIAL,
:NEW.C_LIVRE_OPCAO01,
:NEW.C_LIVRE_OPCAO02,
:NEW.C_LIVRE_OPCAO03,
:NEW.COD_TP_ESTABILIDAD
);
END IF;

IF DELETING THEN
v_DML := 'D';
INSERT INTO RHPBH_RHPARM_SIT_FUNC_AUDIT
(
TIPO_DML,
CODIGO,
DESCRICAO,
ABREVIACAO,
CODIGO_RAIS,
CONTROLE_FOLHA,
SITUACAO_PONTO,
E_AFASTAMENTO,
ABATE_TEMPO_FERIAS,
ABATE_TEMPO_13_SAL,
RESTRICAO_DESLIG,
VERBA_1_PARA_FOLHA,
VERBA_2_PARA_FOLHA,
VERBA_3_PARA_FOLHA,
VERBA_4_PARA_FOLHA,
C_LIVRE_SELEC01,
C_LIVRE_SELEC02,
C_LIVRE_VALOR03,
C_LIVRE_VALOR04,
C_LIVRE_DATA05,
C_LIVRE_DATA06,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
MEDIDA_ESTABILID,
QTDE_ESTAB_POSTER,
SUSPENDE_REMUNERA,
QTDE_DIAS_PROXIMO,
PROXIMA_SIT_FUNC,
MOTIVO_AFAST,
GERA_SAL_BENEFICIO,
TEXTO_ASSOCIADO,
C_LIVRE_DESCR07,
C_LIVRE_DESCR08,
SUSPENDE_VALE,
GERA_REG_ACOMP,
QTDE_DETERMINADA,
CATEG_TRAB_FGTS,
CONSID_DIAS_INSS,
GRUPO_SEL_PESSOA,
COD_SEL_PESSOA,
GRUPO_SEL_CONTRATO,
COD_SEL_CONTRATO,
GERA_SIT_PTO_AUTO,
TIPO_APURACAO,
SEXO,
CODIGO_RETENCAO,
PERMITE_CONCOMIT,
ID_LEI,
DATA_INI_VIGENCIA,
DATA_FIM_VIGENCIA,
DIAS_PRORROG_ORI,
DIAS_PRORROG_DES,
DIAS_INI_PRORROG,
COD_CATEG_ESOCIAL,
C_LIVRE_OPCAO01,
C_LIVRE_OPCAO02,
C_LIVRE_OPCAO03,
COD_TP_ESTABILIDAD
)
VALUES
(
v_DML,
:OLD.CODIGO,
:OLD.DESCRICAO,
:OLD.ABREVIACAO,
:OLD.CODIGO_RAIS,
:OLD.CONTROLE_FOLHA,
:OLD.SITUACAO_PONTO,
:OLD.E_AFASTAMENTO,
:OLD.ABATE_TEMPO_FERIAS,
:OLD.ABATE_TEMPO_13_SAL,
:OLD.RESTRICAO_DESLIG,
:OLD.VERBA_1_PARA_FOLHA,
:OLD.VERBA_2_PARA_FOLHA,
:OLD.VERBA_3_PARA_FOLHA,
:OLD.VERBA_4_PARA_FOLHA,
:OLD.C_LIVRE_SELEC01,
:OLD.C_LIVRE_SELEC02,
:OLD.C_LIVRE_VALOR03,
:OLD.C_LIVRE_VALOR04,
:OLD.C_LIVRE_DATA05,
:OLD.C_LIVRE_DATA06,
USER,
SYSDATE,
:OLD.MEDIDA_ESTABILID,
:OLD.QTDE_ESTAB_POSTER,
:OLD.SUSPENDE_REMUNERA,
:OLD.QTDE_DIAS_PROXIMO,
:OLD.PROXIMA_SIT_FUNC,
:OLD.MOTIVO_AFAST,
:OLD.GERA_SAL_BENEFICIO,
:OLD.TEXTO_ASSOCIADO,
:OLD.C_LIVRE_DESCR07,
:OLD.C_LIVRE_DESCR08,
:OLD.SUSPENDE_VALE,
:OLD.GERA_REG_ACOMP,
:OLD.QTDE_DETERMINADA,
:OLD.CATEG_TRAB_FGTS,
:OLD.CONSID_DIAS_INSS,
:OLD.GRUPO_SEL_PESSOA,
:OLD.COD_SEL_PESSOA,
:OLD.GRUPO_SEL_CONTRATO,
:OLD.COD_SEL_CONTRATO,
:OLD.GERA_SIT_PTO_AUTO,
:OLD.TIPO_APURACAO,
:OLD.SEXO,
:OLD.CODIGO_RETENCAO,
:OLD.PERMITE_CONCOMIT,
:OLD.ID_LEI,
:OLD.DATA_INI_VIGENCIA,
:OLD.DATA_FIM_VIGENCIA,
:OLD.DIAS_PRORROG_ORI,
:OLD.DIAS_PRORROG_DES,
:OLD.DIAS_INI_PRORROG,
:OLD.COD_CATEG_ESOCIAL,
:OLD.C_LIVRE_OPCAO01,
:OLD.C_LIVRE_OPCAO02,
:OLD.C_LIVRE_OPCAO03,
:OLD.COD_TP_ESTABILIDAD
);
END IF;

IF UPDATING THEN
v_DML := 'U';
INSERT INTO RHPBH_RHPARM_SIT_FUNC_AUDIT
(
TIPO_DML,
CODIGO,
DESCRICAO,
ABREVIACAO,
CODIGO_RAIS,
CONTROLE_FOLHA,
SITUACAO_PONTO,
E_AFASTAMENTO,
ABATE_TEMPO_FERIAS,
ABATE_TEMPO_13_SAL,
RESTRICAO_DESLIG,
VERBA_1_PARA_FOLHA,
VERBA_2_PARA_FOLHA,
VERBA_3_PARA_FOLHA,
VERBA_4_PARA_FOLHA,
C_LIVRE_SELEC01,
C_LIVRE_SELEC02,
C_LIVRE_VALOR03,
C_LIVRE_VALOR04,
C_LIVRE_DATA05,
C_LIVRE_DATA06,
LOGIN_USUARIO,
DT_ULT_ALTER_USUA,
MEDIDA_ESTABILID,
QTDE_ESTAB_POSTER,
SUSPENDE_REMUNERA,
QTDE_DIAS_PROXIMO,
PROXIMA_SIT_FUNC,
MOTIVO_AFAST,
GERA_SAL_BENEFICIO,
TEXTO_ASSOCIADO,
C_LIVRE_DESCR07,
C_LIVRE_DESCR08,
SUSPENDE_VALE,
GERA_REG_ACOMP,
QTDE_DETERMINADA,
CATEG_TRAB_FGTS,
CONSID_DIAS_INSS,
GRUPO_SEL_PESSOA,
COD_SEL_PESSOA,
GRUPO_SEL_CONTRATO,
COD_SEL_CONTRATO,
GERA_SIT_PTO_AUTO,
TIPO_APURACAO,
SEXO,
CODIGO_RETENCAO,
PERMITE_CONCOMIT,
ID_LEI,
DATA_INI_VIGENCIA,
DATA_FIM_VIGENCIA,
DIAS_PRORROG_ORI,
DIAS_PRORROG_DES,
DIAS_INI_PRORROG,
COD_CATEG_ESOCIAL,
C_LIVRE_OPCAO01,
C_LIVRE_OPCAO02,
C_LIVRE_OPCAO03,
COD_TP_ESTABILIDAD
)
VALUES
(
v_DML,
:OLD.CODIGO,
:OLD.DESCRICAO,
:OLD.ABREVIACAO,
:OLD.CODIGO_RAIS,
:OLD.CONTROLE_FOLHA,
:OLD.SITUACAO_PONTO,
:OLD.E_AFASTAMENTO,
:OLD.ABATE_TEMPO_FERIAS,
:OLD.ABATE_TEMPO_13_SAL,
:OLD.RESTRICAO_DESLIG,
:OLD.VERBA_1_PARA_FOLHA,
:OLD.VERBA_2_PARA_FOLHA,
:OLD.VERBA_3_PARA_FOLHA,
:OLD.VERBA_4_PARA_FOLHA,
:OLD.C_LIVRE_SELEC01,
:OLD.C_LIVRE_SELEC02,
:OLD.C_LIVRE_VALOR03,
:OLD.C_LIVRE_VALOR04,
:OLD.C_LIVRE_DATA05,
:OLD.C_LIVRE_DATA06,
:NEW.LOGIN_USUARIO,
:NEW.DT_ULT_ALTER_USUA,
:OLD.MEDIDA_ESTABILID,
:OLD.QTDE_ESTAB_POSTER,
:OLD.SUSPENDE_REMUNERA,
:OLD.QTDE_DIAS_PROXIMO,
:OLD.PROXIMA_SIT_FUNC,
:OLD.MOTIVO_AFAST,
:OLD.GERA_SAL_BENEFICIO,
:OLD.TEXTO_ASSOCIADO,
:OLD.C_LIVRE_DESCR07,
:OLD.C_LIVRE_DESCR08,
:OLD.SUSPENDE_VALE,
:OLD.GERA_REG_ACOMP,
:OLD.QTDE_DETERMINADA,
:OLD.CATEG_TRAB_FGTS,
:OLD.CONSID_DIAS_INSS,
:OLD.GRUPO_SEL_PESSOA,
:OLD.COD_SEL_PESSOA,
:OLD.GRUPO_SEL_CONTRATO,
:OLD.COD_SEL_CONTRATO,
:OLD.GERA_SIT_PTO_AUTO,
:OLD.TIPO_APURACAO,
:OLD.SEXO,
:OLD.CODIGO_RETENCAO,
:OLD.PERMITE_CONCOMIT,
:OLD.ID_LEI,
:OLD.DATA_INI_VIGENCIA,
:OLD.DATA_FIM_VIGENCIA,
:OLD.DIAS_PRORROG_ORI,
:OLD.DIAS_PRORROG_DES,
:OLD.DIAS_INI_PRORROG,
:OLD.COD_CATEG_ESOCIAL,
:OLD.C_LIVRE_OPCAO01,
:OLD.C_LIVRE_OPCAO02,
:OLD.C_LIVRE_OPCAO03,
:OLD.COD_TP_ESTABILIDAD
);

END IF;
END;




ALTER TRIGGER "ARTERH"."TR_RHPARM_SIT_FUNC_AUDIT" ENABLE