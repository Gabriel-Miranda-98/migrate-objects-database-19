
  CREATE OR REPLACE EDITIONABLE TRIGGER "PONTO_ELETRONICO"."TR_ARTERH_SDM_LOG" 
AFTER INSERT OR UPDATE OR DELETE ON  PONTO_ELETRONICO.ARTERH_SDM
FOR EACH ROW
 DECLARE
v_DML PONTO_ELETRONICO.ARTERH_SDM_LOG.TIPO_DML%TYPE;

BEGIN


----INICIO----------------------------------------------------------------INSERT
IF INSERTING THEN
v_DML := 'I';
INSERT INTO ARTERH_SDM_LOG
(ID,
TIPO_DML,
ID_GEO,
REDE,
DATA_CARGA,
DATA_DML
)
VALUES
(
(SELECT MAX(ID)+1 FROM ARTERH_SDM_LOG),
v_DML,
:NEW.ID_GEO,
:NEW.REDE,
:NEW.DATA_CARGA,
SYSDATE
);
----FIM-------------------------------------------------------------------INSERT




----INICIO---------------------------------------------------------------UPDATE
ELSIF (UPDATING)THEN 
v_DML := 'U';
INSERT INTO ARTERH_SDM_LOG
(ID,
TIPO_DML,
ID_GEO,
REDE,
DATA_CARGA,
DATA_DML
)
VALUES
(
(SELECT MAX(ID)+1 FROM ARTERH_SDM_LOG),
v_DML,
:NEW.ID_GEO,
:NEW.REDE,
:NEW.DATA_CARGA,
SYSDATE
);
-----FIM--  --------------------------------------------------------------UPDATE



---------INICIO-----------------------------------------------------------DELETE
ELSIF DELETING THEN
v_DML := 'D';
INSERT INTO ARTERH_SDM_LOG
(ID,
TIPO_DML,
ID_GEO,
REDE,
DATA_CARGA,
DATA_DML
)
VALUES
(
(SELECT MAX(ID)+1 FROM ARTERH_SDM_LOG),
v_DML,
:OLD.ID_GEO,
:OLD.REDE,
:OLD.DATA_CARGA,
SYSDATE
);
---------FIM--------------------------------------------------------------DELETE

END IF;


END;

--sinonimo
--CREATE OR REPLACE SYNONYM ARTERHUSR.TR_ARTERH_SDM_LOG  FOR PONTO_ELETRONICO.TR_ARTERH_SDM_LOG ;
--CREATE OR REPLACE SYNONYM INPR003374.TR_ARTERH_SDM_LOG FOR PONTO_ELETRONICO.TR_ARTERH_SDM_LOG ;
--CREATE OR REPLACE SYNONYM PB003553.TR_ARTERH_SDM_LOG FOR PONTO_ELETRONICO.TR_ARTERH_SDM_LOG ;


ALTER TRIGGER "PONTO_ELETRONICO"."TR_ARTERH_SDM_LOG" ENABLE