
  CREATE OR REPLACE EDITIONABLE FUNCTION "ARTERH"."FN_SOF_RPA_VERIFICA_MOVIMENTO" (
	v_CODIGO_CONTRATO IN VARCHAR,
	v_ANO_MES_REFERENCIA IN TIMESTAMP,
	v_CODIGO_VERBA IN VARCHAR,
	v_TIPO_MOVIMENTO IN VARCHAR,
	v_FASE IN VARCHAR,
	v_MODO_OPERACAO IN VARCHAR,
	v_MES_INCIDENCIA IN VARCHAR,
	v_TIPO_CONTRATO IN VARCHAR,
	v_CODIGO_EMPRESA IN VARCHAR	
	)
	RETURN NUMBER
		IS total_reg NUMBER;
	BEGIN
		SELECT COUNT(CODIGO_CONTRATO) into total_reg FROM ARTERH.RHMOVI_MOVIMENTO rm 
		WHERE 
			rm.CODIGO_CONTRATO = v_CODIGO_CONTRATO
		AND rm.ANO_MES_REFERENCIA = trunc(v_ANO_MES_REFERENCIA)
		AND rm.CODIGO_VERBA = v_CODIGO_VERBA
		AND rm.TIPO_MOVIMENTO = v_TIPO_MOVIMENTO
		AND rm.FASE = v_FASE
		AND rm.MODO_OPERACAO = v_MODO_OPERACAO
		AND rm.MES_INCIDENCIA = v_MES_INCIDENCIA
		AND rm.TIPO_CONTRATO = v_TIPO_CONTRATO
		AND rm.CODIGO_EMPRESA = v_CODIGO_EMPRESA;		
		
		/*descomente as linhas abaixo para ter uma visualização das variáveis passadas pela procedure*/
		--DBMS_OUTPUT.PUT_LINE('SELECT COUNT(CODIGO_CONTRATO)  FROM ARTERH.RHMOVI_MOVIMENTO rm ');
		--DBMS_OUTPUT.PUT_LINE('WHERE rm.CODIGO_CONTRATO = '''|| v_CODIGO_CONTRATO || ''' AND rm.ANO_MES_REFERENCIA = '''||trunc(v_ANO_MES_REFERENCIA) || '''');
	    --DBMS_OUTPUT.PUT_LINE(' AND rm.CODIGO_VERBA = ''' || v_CODIGO_VERBA || ''' AND rm.TIPO_MOVIMENTO = '''|| v_TIPO_MOVIMENTO || ''' AND rm.FASE = ' || v_FASE);
	   	--DBMS_OUTPUT.PUT_LINE(' AND rm.MODO_OPERACAO = ''' || v_MODO_OPERACAO || ''' AND rm.MES_INCIDENCIA = '''|| v_MES_INCIDENCIA || ''' AND rm.TIPO_CONTRATO = ''' || v_TIPO_CONTRATO || '''');
	   	--DBMS_OUTPUT.PUT_LINE(' AND rm.CODIGO_EMPRESA = ''' || v_CODIGO_EMPRESA || '''');

		RETURN (total_reg);
	END;




